<% if @children.length > 0 %>

  <div class="line"></div>

  <div class="goal-node-outer">

  <ul class="roots roots0">
  <li>


  <ul class="roots roots1">
  <% @children.each do |link| %>
    <li>
      <div class="highlight">
        <div class="highlight-title">
          <%= render(:partial => 'link_unlink_links', :locals => {:link => link, :@goal => @goal, :view => 'private'})%>
        </div>
      </div>
      <div>
        <% @sublinks_2 = @user.link.where(parent_id: link.child.id).where.not(child_id: @goal.id) %>
      </div>
      <!-- <hr> -->
      <% if @sublinks_2.length > 0 %>
        <div class="line"></div>
  
        <ul class="roots roots2">
          <% @sublinks_2.each do |link2| %>
            <li>
              <div class="highlight">
                <div class="highlight-title">
                  <%= render(:partial => 'link_unlink_links', :locals => {:link => link2, :@goal => @goal, :view => 'private'})%>
                </div>
              </div>
              <!-- <hr> -->
              <% @sublinks_3 = @user.link.where(parent_id: link2.child.id).where.not(child_id: @goal.id) %>
              <% if @sublinks_3.length > 0  %>
                <div class="line"></div>
                <ul class="roots roots3">
                  <% @sublinks_3.each do |link3| %>
                    <li>
                      <div class="highlight">
                        <div class="highlight-title">
                          <%= render(:partial => 'link_unlink_links', :locals => {:link => link3, :@goal => @goal, :view => 'private'})%>
                        </div>
                      </div>

                      <!-- <hr> -->
                      <% @sublinks_4 = @user.link.where(parent_id: link3.child.id).where.not(child_id: @goal.id) %>
                      <% if @sublinks_4.length > 0  %>
                        <div class="line"></div>
                        <ul class="roots roots4">
                          <% @sublinks_4.each do |link4| %>
                            <li>
                              <div class="highlight">
                                <div class="highlight-title">
                                  <%= render(:partial => 'link_unlink_links', :locals => {:link => link4, :@goal => @goal, :view => 'private'})%>
                                </div>
                              </div>
                              
                              <% @sublinks_5 = @user.link.where(parent_id: link4.child.id).where.not(child_id: @goal.id) %>
                              <% if @sublinks_5.length > 0  %>
                                <div class="line"></div>
                                <ul class="roots roots5">
                                  <% @sublinks_5.each do |link5| %>
                                    <li>
                                      <div class="highlight">
                                        <div class="highlight-title">
                                          <%= render(:partial => 'link_unlink_links', :locals => {:link => link5, :@goal => @goal, :view => 'private'})%>

                                          <% if @user.link.where(parent_id: link5.child.id).where.not(child_id: @goal.id).count > 0 %>
                                            <br>
                                            <i class="fas fa-caret-down"></i>
                                          <% end %>

                                        </div>
                                      </div>
                                      
                                    </li>
                                  <% end %>
                                </ul>
                              <% end %>

                            </li>
                          <% end %>
                        </ul>
                      <% end %>

                    </li>
                  <% end %>
                </ul>
              <% end %>

            </li>
          <% end %>
        </ul>
      <% end %>
    </li>
  <% end %>
  </ul>
</li>
</ul>
</div>
<% end %>